---
title: "IntentionBehaviorGap"
author: "Yejin Hwang"
date: "3/7/2019"
output: pdf_document
---

```{r}
library(tidyverse)
library(haven) #haven is part of tidyverse, but for some reason, this is needed.
library(ggplot2)
library(cowplot)
data1 <- read_dta("./data/final_data1.dta")
data2 <- read_dta("./data/final_data2.dta")
data3 <- read_dta("./data/final_data3.dta")
```

## Recreating Table 2
```{r table2}

# Select variables in Table 2 from MyData, put in dataframe d
vars <- c(34, 35, 36, 51, 52)
d <- data1[,vars]
 
# Compute means without missing (NA) values
summary(d)
sapply(d, mean, na.rm=TRUE)
sapply(d, sd, na.rm=TRUE)

```

Note:
windsorized: how they deal with wacky means / outliers
i.e. using x9 to replace x10
use windsor.mean function
may be prewindsorized data

Tables:
```{r table1}
controlGroup <- data1 %>% filter(treatment_group=="control") %>% select(age_yr, female_d, educ_yr, bs_b15a,moved_yesno_d,bs_b1_ever_job_d,bs_b13_reserv_wage,bs_b14,bs_transport_cost,bs_b16,bs_c2,bs_c3)
stargazer::stargazer(controlGroup, type = "text")
```

summary stats: tables 1 and 2
Table 3-Effects on Job Search Intensity. panel-data regression and se. outcome var winsorized=remove extreme values
Table 4-Effects on Employment Outcomes. regression and se.
Table 5-Effects on Frequency of Search-Channel Use

Graphs:
Figure 1. Intention-Behavior Gap: Difference at Baseline - density plot Hours and apps difference: Goal - Baseline

```{r figure1}
hours_diff_density <- ggplot(data1, aes(hours_diff, stat(density))) + geom_histogram(fill = "#416b85", bins = 18) + labs(x = "Hours difference: Goal - Baseline", y = "Density") + ylim(0, 0.15)
apps_diff_density <- ggplot(data1, aes(apps_diff, stat(density))) + geom_histogram(fill = "#416b85", bins = 18) + labs(x = "Apps difference: Goal - Baseline", y = "Density")
plot_grid(hours_diff_density, apps_diff_density)
```
